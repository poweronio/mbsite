function geodir_location_switcher_chosen_ajax(){jQuery("select.geodir_location_switcher_chosen").each(function(){var e=jQuery(this),t=e.data("autoredirect"),n=e.data("countrysearch"),r=geodir_location_all_js_msg.geodir_location_admin_ajax_url;if(e.data("ajaxchosen")=="1"||e.data("ajaxchosen")===undefined){var i=e.parents(".geodir_location_tab_container").find(".gd-tab-active").data("location"),s=e.data("showeverywhere");e.ajaxChosen({keepTypingMsg:geodir_location_all_js_msg.LOCATION_CHOSEN_KEEP_TYPE_TEXT,lookingForMsg:geodir_location_all_js_msg.LOCATION_CHOSEN_LOOKING_FOR_TEXT,type:"GET",url:r+"?action=geodir_location_ajax&gd_loc_ajax_action=fill_location&autoredirect="+t+"&gd_which_location="+i+"&show_every_where="+s,dataType:"html",success:function(t){e.html(t).chosen().trigger("chosen:updated"),geodir_enable_click_on_chosen_list_item()}},null,{})}})}function geodir_location_add_listing_chosen(){jQuery("select.geodir_location_add_listing_chosen").each(function(){var e=jQuery(this),t=e.parents(".geodir_location_add_listing_all_chosen_container"),n=geodir_location_all_js_msg.geodir_location_admin_ajax_url,r=e.prop("name"),i=r.split("_");listfor=i[1];var s="",o="",u="";s=t.find(".geodir_location_add_listing_country_chosen_div").find('input[name="geodir_location_add_listing_country_val"]').val(),o=t.find(".geodir_location_add_listing_region_chosen_div").find('input[name="geodir_location_add_listing_region_val"]').val(),u=t.find(".geodir_location_add_listing_city_chosen_div").find('input[name="geodir_location_add_listing_city_val"]').val(),(e.data("ajaxchosen")=="1"||e.data("ajaxchosen")===undefined)&&e.ajaxChosen({keepTypingMsg:geodir_location_all_js_msg.LOCATION_CHOSEN_KEEP_TYPE_TEXT,lookingForMsg:geodir_location_all_js_msg.LOCATION_CHOSEN_LOOKING_FOR_TEXT,type:"GET",url:n+"?action=geodir_location_ajax&gd_loc_ajax_action=fill_location_on_add_listing&gd_which_location="+listfor+"&country_val="+s+"&region_val="+o+"&city_val="+u,dataType:"html",success:function(t){e.html(t).chosen().trigger("chosen:updated"),geodir_location_add_listing_chosen()}},null,{})})}function geodir_enable_click_on_chosen_list_item(){jQuery(".chosen-results").bind("click",function(){var e=jQuery(".chosen-results").find('li[data-option-array-index="0"]').html(),t=jQuery(this).parents(".geodir_location_sugestion").find(".chosen-single > span").html();e==t&&jQuery(this).parents(".geodir_location_sugestion").find("select").trigger("change")})}function geodir_set_map_default_location(e,t,n){e!=""&&t!=""&&n!=""&&(jQuery("#"+e).goMap(),jQuery.goMap.map.setCenter(new google.maps.LatLng(t,n)),baseMarker.setPosition(new google.maps.LatLng(t,n)),updateMarkerPosition(baseMarker.getPosition()),geocodePosition(baseMarker.getPosition()))}function geodir_lm_chosen_supported(){return window.navigator.appName==="Microsoft Internet Explorer"?document.documentMode>=8:/iP(od|hone|ad)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0}function geodir_no_chosen_add_search(e,t){var n=jQuery(e).find('select[name="gd_location"]');jQuery(n).removeAttr("size"),jQuery(n).removeClass("geodir-loc-select-list"),jQuery(e).find(".gd-no-chosen-seach").remove();var r='<div class="chosen-search"><input type="text" name="term" class="gd-no-chosen-seach" value="" onkeyup="javascript:geodir_no_chosen_search(this);" /></div>';jQuery(n).before(r);if(typeof t=="undefined"||t=="")t=jQuery(e).find(".geodir_location_tabs.gd-tab-active").attr("data-location");var i="";t=="city"?i=geodir_location_all_js_msg.gd_text_search_city:t=="region"?i=geodir_location_all_js_msg.gd_text_search_region:t=="country"&&(i=geodir_location_all_js_msg.gd_text_search_country),i=i!=""?i:geodir_location_all_js_msg.gd_text_search_location,jQuery(e).find(".gd-no-chosen-seach").attr("placeholder",i)}function geodir_no_chosen_search(e){var t=jQuery(e).val();typeof t!="undefined"&&t!=""?t=t.replace(/^\s+/,""):t="";var n=geodir_location_all_js_msg.geodir_location_admin_ajax_url,r=t!=""?"&term="+t:"",i=jQuery(e).closest(".geodir_location_tab_container"),s=jQuery(i).find(".geodir_location_tabs.gd-tab-active"),o=jQuery(s).data("location"),u=jQuery(s).parents(".geodir_location_tab_container").find(".geodir_location_switcher_chosen").data("autoredirect"),a=jQuery(s).parents(".geodir_location_tab_container").find(".geodir_location_switcher_chosen").data("showeverywhere");jQuery.post(n+"?action=geodir_location_ajax&gd_loc_ajax_action=fill_location&autoredirect="+u+"&gd_which_location="+o+"&show_every_where="+a+r,function(e){jQuery(s).parents(".geodir_location_tab_container").find(".geodir_location_switcher_chosen").html(e).chosen().trigger("chosen:updated"),geodir_enable_click_on_chosen_list_item(),geodir_expand_option(i),jQuery(i).find('select[name="gd_location"] option').each(function(){jQuery(this).bind("click",function(){if(jQuery(this).attr("selected")=="selected"||jQuery(this).attr("value")==geodir_location_all_js_msg.gd_base_location)jQuery(this).closest("select").removeAttr("size"),jQuery(this).closest("select").removeClass("geodir-loc-select-list")})})}),geodir_location_switcher_chosen_ajax()}function geodir_expand_option(e,t){var n=jQuery(e).find('select[name="gd_location"]'),r=jQuery(n).children("option").length;typeof t!="undefined"?(jQuery(n).removeAttr("size"),jQuery(n).removeClass("geodir-loc-select-list")):parseInt(r)<2?(jQuery(n).removeAttr("size"),jQuery(n).removeClass("geodir-loc-select-list")):(jQuery(n).attr("size",r),jQuery(n).addClass("geodir-loc-select-list"))}function gdShareLocationError(e){switch(e.code){case e.PERMISSION_DENIED:alert(geodir_location_all_js_msg.PERMISSION_DENINED);break;case e.POSITION_UNAVAILABLE:alert(geodir_location_all_js_msg.POSITION_UNAVAILABLE);break;case e.TIMEOUT:alert(geodir_location_all_js_msg.DEFAUTL_ERROR);break;case e.UNKNOWN_ERROR:alert(geodir_location_all_js_msg.UNKNOWN_ERROR)}}function gdLocationSetupUserLoc(){my_location?(jQuery(".geodir-search .fa-compass").css("color","#087CC9"),jQuery(".gt_near_me_s").prop("checked",!0),jQuery(".snear").val(geodir_location_all_js_msg.msg_Near+" "+geodir_location_all_js_msg.msg_Me),jQuery(".sgeo_lat").val(lat),jQuery(".sgeo_lon").val(lon)):lat&&lon?(jQuery(".geodir-search .fa-compass").css("color","#087CC9"),jQuery(".gt_near_me_s").prop("checked",!0),jQuery(".snear").val(geodir_location_all_js_msg.msg_Near+" "+geodir_location_all_js_msg.msg_User_defined),jQuery(".sgeo_lat").val(lat),jQuery(".sgeo_lon").val(lon)):jQuery(".snear").length&&jQuery(".snear").val().match("^"+geodir_location_all_js_msg.msg_Near)&&(jQuery(".geodir-search .fa-compass").css("color",""),jQuery(".gt_near_me_s").prop("checked",!1),jQuery(".snear").val(""),jQuery(".snear").blur(),jQuery(".sgeo_lat").val(""),jQuery(".sgeo_lon").val(""))}jQuery(document).ready(function(){setTimeout(function(){var e;jQuery('input[name="loc_pick_country_filter"]').keyup(function(){var t=jQuery(this);jQuery(this).parent().find("ul").html(geodir_location_all_js_msg.LOCATION_PLEASE_WAIT),clearInterval(e),e=setTimeout(function(){var e=geodir_location_all_js_msg.geodir_location_admin_ajax_url;jQuery.post(e,{action:"geodir_location_ajax",gd_loc_ajax_action:"get_location",gd_formated_for:"location_switcher",gd_which_location:"country",gd_country_val:t.val()},function(e){t.parent().find("ul").html(e)})},500)}),jQuery('input[name="loc_pick_region_filter"]').keyup(function(){var t=jQuery(this).parent().parent().find('input[name="loc_pick_country_filter"]').val();jQuery(this).parent().find("ul").html(geodir_location_all_js_msg.LOCATION_PLEASE_WAIT);var n=jQuery(this);clearInterval(e),e=setTimeout(function(){var e=geodir_location_all_js_msg.geodir_location_admin_ajax_url;jQuery.post(e,{action:"geodir_location_ajax",gd_loc_ajax_action:"get_location",gd_formated_for:"location_switcher",gd_which_location:"region",gd_country_val:t,gd_region_val:n.val()},function(e){n.parent().find("ul").html(e)})},500)}),jQuery('input[name="loc_pick_city_filter"]').keyup(function(){jQuery(this).parent().find("ul").html(geodir_location_all_js_msg.LOCATION_PLEASE_WAIT);var t=jQuery(this).parent().parent().find('input[name="loc_pick_country_filter"]').val(),n=jQuery(this).parent().parent().find('input[name="loc_pick_region_filter"]').val(),r=jQuery(this);clearInterval(e),e=setTimeout(function(){var e=geodir_location_all_js_msg.geodir_location_admin_ajax_url;jQuery.post(e,{action:"geodir_location_ajax",gd_loc_ajax_action:"get_location",gd_formated_for:"location_switcher",gd_which_location:"city",gd_country_val:t,gd_region_val:n,gd_city_val:r.val()},function(e){r.parent().find("ul").html(e)})},500)}),jQuery(".geodir-locListing_column ul").on("click"," .geodir_loc_arrow a",function(){var e="",t="",n="",r="",i=0;jQuery(this).parents("ul").find("li").removeClass("geodir_active"),jQuery(this).parents("li").addClass("geodir_active"),jQuery(this).parents(".geodir-locListing_column").find("input").val(jQuery(this).parents("li").find("a").html()),jQuery(this).parents("ul").attr("class")=="geodir_country_column"?(e="region",t=jQuery(this).parents("li").find("a").html(),jQuery(this).parents(".geodir_locListing_main").find("input").eq(1).val(""),i=1):(e="city",n=jQuery(this).parents("li").find("a").html(),jQuery(this).parents(".geodir_locListing_main").find("input").eq(2).val(""),i=2);var s=jQuery(this).parents(".geodir_locListing_main").find(".geodir-locListing_column").eq(i).find("ul").html(geodir_location_all_js_msg.LOCATION_PLEASE_WAIT),o=geodir_location_all_js_msg.geodir_location_admin_ajax_url;jQuery.post(o,{action:"geodir_location_ajax",gd_loc_ajax_action:"get_location",gd_formated_for:"location_switcher",gd_which_location:e,gd_country_val:t,gd_region_val:n,gd_city_val:r},function(e){s.html(e)})}),jQuery(".geodir_location_tab_container .geodir_location_tabs").bind("click",function(){var e=geodir_location_all_js_msg.geodir_location_admin_ajax_url,t=this,n=jQuery(this).data("location"),r=jQuery(t).parents(".geodir_location_tab_container").find(".geodir_location_switcher_chosen").data("autoredirect"),i=jQuery(t).parents(".geodir_location_tab_container").find(".geodir_location_switcher_chosen").data("showeverywhere");jQuery.post(e+"?action=geodir_location_ajax&gd_loc_ajax_action=fill_location&autoredirect="+r+"&gd_which_location="+n+"&show_every_where="+i,function(e){jQuery(t).parents(".geodir_location_tab_container").find(".geodir_location_switcher_chosen").html(e).chosen().trigger("chosen:updated"),geodir_enable_click_on_chosen_list_item()}),jQuery(t).parents(".geodir_location_tab_container").find(".geodir_location_tabs").removeClass("gd-tab-active"),jQuery(t).addClass("gd-tab-active"),geodir_lm_chosen_supported()||geodir_no_chosen_add_search(jQuery(t).parents(".geodir_location_tab_container")),geodir_location_switcher_chosen_ajax()}),geodir_lm_chosen_supported()?(jQuery("select.geodir_location_switcher_chosen").length>0&&jQuery("select.geodir_location_switcher_chosen").chosen({no_results_text:geodir_location_all_js_msg.LOCATION_CHOSEN_NO_RESULT_TEXT}),jQuery("select.geodir_location_add_listing_chosen").length>0&&jQuery("select.geodir_location_add_listing_chosen").chosen({no_results_text:geodir_location_all_js_msg.LOCATION_CHOSEN_NO_RESULT_TEXT}),geodir_location_switcher_chosen_ajax()):(jQuery("body").removeClass("gd-chosen-no-support").addClass("gd-chosen-no-support"),jQuery(".geodir_location_tab_container").each(function(){var e=this;geodir_no_chosen_add_search(e)})),geodir_enable_click_on_chosen_list_item(),geodir_lm_chosen_supported()||(jQuery(document).click(function(e){var t=jQuery(e.target).closest(".geodir_location_sugestion").html();typeof t=="undefined"&&jQuery(document).find(".geodir_location_sugestion").each(function(){jQuery(this).find('select[name="gd_location"]').removeAttr("size"),jQuery(this).find('select[name="gd_location"]').removeClass("geodir-loc-select-list")})}),jQuery(document).find('.geodir_location_sugestion select[name="gd_location"] option').click(function(){if(jQuery(this).attr("selected")=="selected"||jQuery(this).attr("value")==geodir_location_all_js_msg.gd_base_location)jQuery(this).closest("select").removeAttr("size"),jQuery(this).closest("select").removeClass("geodir-loc-select-list")}))},100)}),jQuery(document).ready(function(){geodir_location_add_listing_chosen(),jQuery("select.geodir_location_add_listing_chosen").bind("change",function(){var e=jQuery(this),t=e.data("location_type"),n=geodir_location_all_js_msg.geodir_location_admin_ajax_url,r='<div class="location_dl_loader" align="center" style="width:100%;"><img src="'+geodir_all_js_msg.geodir_plugin_url+'/geodirectory-assets/images/loadingAnimation.gif"  /></div>',i=e.parents(".geodir_location_add_listing_all_chosen_container"),s="",o="",u="";if(t=="country"){if(e.attr("name")!="post_country")return!1;i.find(".geodir_location_add_listing_country_chosen_div").find('input[name="geodir_location_add_listing_country_val"]').val(e.val()),s=e.val(),i.find(".geodir_location_add_listing_region_chosen_div").hide(),i.find(".geodir_location_add_listing_region_chosen_div").after(r),jQuery.post(n,{action:"geodir_location_ajax",gd_loc_ajax_action:"fill_location_on_add_listing",gd_which_location:"region",country_val:s},function(e){e&&(i.find(".geodir_location_add_listing_region_chosen_div").next(".location_dl_loader").remove(),i.find(".geodir_location_add_listing_region_chosen_div").show(),i.find(".geodir_location_add_listing_region_chosen_div").find("select").html(e).chosen().trigger("chosen:updated"),i.find(".geodir_location_add_listing_region_chosen_div").find("select").trigger("change"),geodir_location_add_listing_chosen())})}t=="region"&&(s=i.find(".geodir_location_add_listing_country_chosen_div").find('input[name="geodir_location_add_listing_country_val"]').val(),i.find(".geodir_location_add_listing_region_chosen_div").find('input[name="geodir_location_add_listing_region_val"]').val(e.val()),o=e.val(),i.find(".geodir_location_add_listing_city_chosen_div").hide(),i.find(".geodir_location_add_listing_city_chosen_div").after(r),jQuery.post(n,{action:"geodir_location_ajax",gd_loc_ajax_action:"fill_location_on_add_listing",gd_which_location:"city",country_val:s,region_val:o},function(e){e&&(i.find(".geodir_location_add_listing_city_chosen_div").next(".location_dl_loader").remove(),i.find(".geodir_location_add_listing_city_chosen_div").show(),i.find(".geodir_location_add_listing_city_chosen_div").find("select").html(e).chosen().trigger("chosen:updated"),i.find(".geodir_location_add_listing_city_chosen_div").find("select").trigger("change"),geodir_location_add_listing_chosen())})),t=="city"&&(s=i.find(".geodir_location_add_listing_country_chosen_div").find('input[name="geodir_location_add_listing_country_val"]').val(),o=i.find(".geodir_location_add_listing_region_chosen_div").find('input[name="geodir_location_add_listing_region_val"]').val(),i.find(".geodir_location_add_listing_city_chosen_div").find('input[name="geodir_location_add_listing_city_val"]').val(e.val()),u=e.val(),i.find(".geodir_location_add_listing_neighbourhood_chosen_container").show(),i.find(".geodir_location_add_listing_neighbourhood_chosen_div").hide(),i.find(".geodir_location_add_listing_neighbourhood_chosen_div").after(r),jQuery.post(n,{action:"geodir_location_ajax",gd_loc_ajax_action:"fill_location_on_add_listing",gd_which_location:"neighbourhood",country_val:s,region_val:o,city_val:u},function(e){e?(i.find(".geodir_location_add_listing_neighbourhood_chosen_container").show(),i.find(".geodir_location_add_listing_neighbourhood_chosen_div").next(".location_dl_loader").remove(),i.find(".geodir_location_add_listing_neighbourhood_chosen_div").show(),i.find(".geodir_location_add_listing_neighbourhood_chosen_div").find("select").html(e).chosen().trigger("chosen:updated")):(i.find(".geodir_location_add_listing_neighbourhood_chosen_div").next(".location_dl_loader").remove(),i.find(".geodir_location_add_listing_neighbourhood_chosen_container").hide())}))})}),jQuery(document).ready(function(){locationSPage=[],locationSPage.city=1,locationSPage.region=1,locationSPage.country=1,locationSActive=!1,setTimeout(function(){jQuery(".geodir_location_sugestion .geodir-chosen-container .chosen-results").scroll(function(){if(jQuery(this).scrollTop()+jQuery(this).innerHeight()>=jQuery(this)[0].scrollHeight){if(locationSActive)return;if(jQuery(this).scrollTop()==0)return;obj=this;var e=jQuery(this).scrollTop(),t="",n=geodir_location_all_js_msg.geodir_location_admin_ajax_url,r=t!=""?"&term="+t:"",i=jQuery(obj).closest(".geodir_location_tab_container"),s=jQuery(i).find(".geodir_location_tabs.gd-tab-active"),o=jQuery(s).data("location"),u=jQuery(s).parents(".geodir_location_tab_container").find(".geodir_location_switcher_chosen").data("autoredirect"),a=jQuery(s).parents(".geodir_location_tab_container").find(".geodir_location_switcher_chosen").data("showeverywhere");if(locationSPage[o]=="0")return;locationSActive=!0,jQuery(obj).addClass("loading_div_loc"),jQuery.post(n+"?action=geodir_location_ajax&gd_loc_ajax_action=fill_location&autoredirect="+u+"&gd_which_location="+o+"&show_every_where="+a+r+"&lscroll=true&spage="+locationSPage[o],function(t){jQuery(obj).removeClass("loading_div_loc"),locationSPage[o]++,t==""&&(locationSPage[o]="0");var n=jQuery(s).parents(".geodir_location_tab_container").find(".geodir_location_switcher_chosen").html();jQuery(s).parents(".geodir_location_tab_container").find(".geodir_location_switcher_chosen").html(n+t).chosen().trigger("chosen:updated"),geodir_enable_click_on_chosen_list_item(),geodir_expand_option(i),jQuery(i).find('select[name="gd_location"] option').each(function(){jQuery(this).bind("click",function(){if(jQuery(this).attr("selected")=="selected"||jQuery(this).attr("value")==geodir_location_all_js_msg.gd_base_location)jQuery(this).closest("select").removeAttr("size"),jQuery(this).closest("select").removeClass("geodir-loc-select-list")})}),jQuery(obj).scrollTop(e),locationSActive=!1}),geodir_location_switcher_chosen_ajax()}})},1e3)});